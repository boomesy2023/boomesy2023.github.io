---
date: 2022-12-10
category:
  - Java
  - åŸºç¡€
tag:
  - æ’åº
star: true
sticky: true
---

# Java\_åŸºç¡€-æšä¸¾ç”¨æ³•

## æšä¸¾

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ä»€ä¹ˆæ˜¯ Java æšä¸¾ã€å®ƒä»¬è§£å†³çš„é—®é¢˜ä»¥åŠå®ƒä»¬çš„ä¸€äº›è®¾è®¡æ¨¡å¼å¦‚ä½•åœ¨å®è·µä¸­ä½¿ç”¨ã€‚

### 1. æ¦‚è¿°

Java 5 é¦–å…ˆå¼•å…¥äº† enum å…³é”®å­—ã€‚å®ƒè¡¨ç¤ºä¸€ç§ç‰¹æ®Šç±»å‹çš„ç±»ï¼Œå®ƒæ€»æ˜¯æ‰©å±• java.lang.Enum ç±»ã€‚æœ‰å…³ä½¿ç”¨çš„å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åˆ°[æ–‡æ¡£](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Enum.html)ã€‚ ä»¥è¿™ç§æ–¹å¼å®šä¹‰çš„å¸¸é‡ä½¿ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œå…è®¸è¿›è¡Œç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¢„å…ˆè®°å½•å¯æ¥å—å€¼çš„åˆ—è¡¨ï¼Œå¹¶é¿å…ç”±äºä¼ å…¥æ— æ•ˆå€¼è€Œå¯¼è‡´çš„æ„å¤–è¡Œä¸ºã€‚

### 2. å®šä¹‰

æœ€ç®€å•çš„å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ã€‚

```java
public enum WeekDay {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
}
```

### 3. è‡ªå®šä¹‰æšä¸¾æ–¹æ³•

ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œä¼šæ ¹æ®å‚æ•°*local*è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯"CN"è¿”å›å€¼å°±åŠ  1ï¼Œå¦‚æœä¸æ˜¯å°±ç›´æ¥è¿”å›åºæ•°ã€‚

```java
int daysOrderInWeek(String local) {
    if (local.equals("CN")) {
        return ordinal() + 1;
    }
    return ordinal();
}
```

```java
public static void main(String[] args) {
    System.out.println(WeekDay.MONDAY.daysOrderInWeek("CN"));
    System.out.println(WeekDay.MONDAY.daysOrderInWeek("EN"));
}

// ç»“æœ
// 1
// 0
```

å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ–¹æ³•æ˜¯ä½¿ç”¨æšä¸¾ä¸­å®šä¹‰çš„å€¼æ¥è®¿é—®ï¼Œå¦‚æœéœ€è¦å®šä¹‰æšä¸¾ç±»è®¿é—®çš„æ–¹æ³•ï¼Œè¦ç”¨*static*ä¿®é¥°ï¼Œå®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚æ¯”å¦‚ï¼š

```java
static WeekDay firstDayInWeek(String local) {
    if (local.equals("CN")) {
        return MONDAY;
    }
    return SUNDAY;
}

// æµ‹è¯•
System.out.println(WeekDay.firstDayInWeek("CN"));
System.out.println(WeekDay.firstDayInWeek("US"));
// ç»“æœ
// MONDAY
// SUNDAY
```

### 4. ä½¿ç”¨â€œ==â€æ¯”è¾ƒæšä¸¾

ç”±äºæšä¸¾ç±»å‹ç¡®ä¿ JVM ä¸­åªæœ‰ä¸€ä¸ªå¸¸é‡å®ä¾‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨â€œ==â€è¿ç®—ç¬¦æ¥æ¯”è¾ƒä¸¤ä¸ªå˜é‡ã€‚

æ­¤å¤–ï¼Œâ€œ==â€è¿ç®—ç¬¦æä¾›ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶å®‰å…¨æ€§ã€‚

```java
WeekDay firstDayUS = WeekDay.firstDayInWeek("US");
if (firstDayUS == WeekDay.SUNDAY) {
    System.out.println("å¯¹çš„ï¼Œå°±æ˜¯è¿™æ ·ã€‚");
}
```

### 5. åœ¨ switch ä¸­ä½¿ç”¨

éå¸¸æ–¹ä¾¿å’Œç®€å•ã€‚

```java
public void tellItLikeItIs() {
    switch (day) {
        case MONDAY -> System.out.println("å‘¨ä¸€å¾ˆç³Ÿç³•ã€‚");
        case FRIDAY -> System.out.println("å‘¨äº”éå¸¸å¥½ã€‚");
        case SATURDAY, SUNDAY -> System.out.println("å‘¨æœ«æ˜¯æœ€å¥½çš„ã€‚");
        default -> System.out.println("å‘¨ä¸­çš„æ—¥å­ä¸€èˆ¬èˆ¬ã€‚");
    }
}
```

### 6. æšä¸¾çš„å­—æ®µã€æ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°

```java
public class Pizza {

    private PizzaStatus status;
    public enum PizzaStatus {
        ORDERED (5){
            @Override
            public boolean isOrdered() {
                return true;
            }
        },
        READY (2){
            @Override
            public boolean isReady() {
                return true;
            }
        },
        DELIVERED (0){
            @Override
            public boolean isDelivered() {
                return true;
            }
        };

        private int timeToDelivery;

        public boolean isOrdered() {return false;}

        public boolean isReady() {return false;}

        public boolean isDelivered(){return false;}

        public int getTimeToDelivery() {
            return timeToDelivery;
        }

        PizzaStatus (int timeToDelivery) {
            this.timeToDelivery = timeToDelivery;
        }
    }

    public boolean isDeliverable() {
        return this.status.isReady();
    }

    public void printTimeToDeliver() {
        System.out.println("Time to delivery is " +
          this.getStatus().getTimeToDelivery());
    }

    // Methods that set and get the status variable.
}
```

æµ‹è¯•ä¸Šé¢çš„ä»£ç ã€‚

```java
@Test
public void givenPizaOrder_whenReady_thenDeliverable() {
    Pizza testPz = new Pizza();
    testPz.setStatus(Pizza.PizzaStatus.READY);
    assertTrue(testPz.isDeliverable());
}
```

### 7. EnumSet å’Œ EnunMap

#### 7.1 EnumSet

_EnumSet_ æ˜¯ä¸“é—¨ç”¨äº _Enum_ ç±»å‹çš„ Set å®ç°ã€‚

```java
EnumSet<WeekDay> weekends = EnumSet.of(WeekDay.SATURDAY, WeekDay.SUNDAY);
for (WeekDay weekend : weekends) {
    System.out.printf("ä»Šå¤©æ˜¯å‘¨æœ«ï¼š%s\n", weekend.name());
}

List<WeekDay> weekDays = Arrays.stream(WeekDay.values()).filter(WeekDay::isWeekends).toList();
System.out.println(weekDays.size() == weekends.size());
```

#### 7.2 EnumMap

_EnumMap_ æ˜¯ä¸€ç§ä¸“é—¨çš„ Map å®ç°ï¼Œæ—¨åœ¨ä¸æšä¸¾å¸¸é‡ä¸€èµ·ç”¨ä½œé”®ã€‚ä¸å…¶å¯¹åº”çš„ HashMap ç›¸æ¯”ï¼Œå®ƒæ˜¯ä¸€ç§é«˜æ•ˆä¸”ç´§å‡‘çš„å®ç°ï¼Œåœ¨å†…éƒ¨è¡¨ç¤ºä¸ºæ•°ç»„ã€‚

å®šä¹‰çš„æ—¶å€™éœ€è¦æŒ‡å®š k*eyType*ã€‚

```java
EnumMap<WeekDay, String> nameMap = new EnumMap<>(WeekDay.class);
nameMap.put(WeekDay.MONDAY, "å‘¨ä¸€");
nameMap.put(WeekDay.TUESDAY, "å‘¨äºŒ");
nameMap.put(WeekDay.WEDNESDAY, "å‘¨ä¸‰");
nameMap.put(WeekDay.THURSDAY, "å‘¨å››");

System.out.println(nameMap.get(WeekDay.MONDAY));
```

### 8. ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼

é€šå¸¸ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å®ç°ä¸€ä¸ªç±»æ˜¯éå¸¸é‡è¦çš„ã€‚æšä¸¾æä¾›äº†ä¸€ç§å®ç°å•ä¾‹çš„å¿«é€Ÿç®€ä¾¿çš„æ–¹æ³•ã€‚

æ­¤å¤–ï¼Œç”±äºæšä¸¾ç±»åœ¨åº•å±‚å®ç°äº† Serializable æ¥å£ï¼Œå› æ­¤ JVM ä¿è¯è¯¥ç±»æ˜¯å•ä¾‹ã€‚è¿™ä¸ä¼ ç»Ÿå®ç°ä¸åŒï¼Œåœ¨ä¼ ç»Ÿå®ç°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿åœ¨ååºåˆ—åŒ–æœŸé—´ä¸åˆ›å»ºæ–°å®ä¾‹ã€‚

```java
public enum EnumSingleton {
    INSTANCE;

    public static EnumSingleton getInstance() {
        return INSTANCE;
    }

    private final WeekDay weekDay = WeekDay.SUNDAY;

    public String sundayName() {
        return weekDay.name();
    }
}
```

### 9. ä½¿ç”¨æšä¸¾å®ç°ç­–ç•¥æ¨¡å¼

é€šå¸¸ï¼Œç­–ç•¥æ¨¡å¼æ˜¯é€šè¿‡å…·æœ‰ç”±ä¸åŒç±»å®ç°çš„æ¥å£æ¥ç¼–å†™çš„ã€‚ æ·»åŠ æ–°ç­–ç•¥æ„å‘³ç€æ·»åŠ æ–°çš„å®ç°ç±»ã€‚

ä½¿ç”¨æšä¸¾ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæ·»åŠ æ–°çš„å®ç°æ„å‘³ç€åªéœ€å®šä¹‰å¦ä¸€ä¸ªå…·æœ‰æŸç§å®ç°çš„å®ä¾‹ã€‚

```java
public enum CalculatorEnum {
    ADD("+") {
        @Override
        public int exec(int a, int b) {
            return a + b;
        }
    },
    SUB("-") {
        @Override
        public int exec(int a, int b) {
            return a - b;
        }
    },
    MUL("*") {
        @Override
        public int exec(int a, int b) {
            return a * b;
        }
    };

    private final String value;

    CalculatorEnum(String value) {
        this.value = value;
    }

    public String getValue() {
        return this.value;
    }

    public abstract int exec(int a, int b);

}
```

æµ‹è¯•ä¸€ä¸‹è¿è¡Œç»“æœï¼š

```java
public class StrategyTest {
    public static void main(String[] args) {
        int a = 2;
        int b = 3;

        System.out.println("ä¸¤æ•°ç›¸åŠ ç­‰äºï¼š" + exec("+", a, b));
        System.out.println("ä¸¤æ•°ç›¸å‡ç­‰äºï¼š" + exec("-", a, b));
        System.out.println("ä¸¤æ•°ç›¸ä¹˜ç­‰äºï¼š" + exec("*", a, b));
    }

    private static int exec(String symbol, int a, int b) {
        if (symbol.equals(CalculatorEnum.ADD.getValue())) {
            return CalculatorEnum.ADD.exec(a, b);
        } else if (symbol.equals(CalculatorEnum.SUB.getValue())) {
            return CalculatorEnum.SUB.exec(a, b);
        } else if (symbol.equals(CalculatorEnum.MUL.getValue())) {
            return CalculatorEnum.MUL.exec(a, b);
        }
        return -1;
    }
}
```

> ç­–ç•¥æšä¸¾æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€å’Œæ–¹ä¾¿çš„æ¨¡å¼ï¼Œä½†æ˜¯å®ƒå—åˆ°æšä¸¾ç±»å‹çš„é™åˆ¶ï¼Œæ¯ä¸ªæšä¸¾é¡¹éƒ½æ˜¯ publicã€finalã€static çš„ï¼Œæ‰©å±•æ€§æ”¶åˆ°äº†ä¸€å®šçš„çº¦æŸï¼Œå› æ­¤åœ¨ç³»ç»Ÿå¼€å‘ä¸­ï¼Œç­–ç•¥æšä¸¾ä¸€èˆ¬æ‹…å½“ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„è§’è‰²ã€‚â€”â€”ã€Šè®¾è®¡æ¨¡å¼ä¹‹ç¦…ã€‹

### 10. æšä¸¾çš„ JSON è¡¨ç¤º

ä½¿ç”¨ Jackson åº“ï¼Œå¯ä»¥ä½¿ç”¨ JSON è¡¨ç¤ºæšä¸¾ç±»å‹ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯ POJO ä¸€æ ·ã€‚

```java
// ä½¿ç”¨æ³¨é‡Š ä¿®é¥°æšä¸¾ç±»
@JsonFormat(shape = JsonFormat.Shape.OBJECT)

// ä¿®é¥°å­—æ®µ
 @JsonProperty("fieldName")
```

æœ‰å…³æšä¸¾ç±»å‹çš„ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ï¼‰çš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ [Jackson](https://github.com/FasterXML/jackson)ã€‚

## ç»“è¯­

ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰

å‚è€ƒé“¾æ¥ï¼š

- [Oracle Java](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)
- [Baeldung Java](https://www.baeldung.com/a-guide-to-java-enums)
